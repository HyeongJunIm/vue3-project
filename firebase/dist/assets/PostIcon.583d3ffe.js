import{s as V,u as j,V as d,Z as b,bq as _,L as se,br as le,M as ie,bs as re,bt as O,bu as ue,P as ce,W as y,ay as de,R as ve,bv as fe,bw as me,bx as he,X as ge,by as ke,a0 as L,bz as E,I as A,bA as ye,K as q,C as H,bB as be,h as D,bl as pe,a4 as Te,bC as N,a3 as Se,J as we,bD as Ce,o as I,d as Pe,j as xe,x as Be,a8 as Oe,c as Le,t as M,i as Ee,q as Ae,a as qe,e as He}from"./index.5deb3121.js";import{h as De,r as Ne,d as Ie,e as Me,f as Ve,i as je}from"./post.5ee9985e.js";const ze=(e,i)=>{console.log(i);const{initialCount:v}=i||{},{uid:l,isAuthenticated:n}=V(j()),t=d(!1),s=d(v),a=d(e),r=async()=>{if(n.value===!1){t.value=!1;return}t.value=await De(l.value,a.value)},c=async()=>{if(n.value===!1){alert("\uB85C\uADF8\uC778 \uD6C4 \uC774\uC6A9 \uAC00\uB2A5\uD569\uB2C8\uB2E4.");return}t.value?(await Ne(l.value,a.value),s.value--):(await Ie(l.value,a.value),s.value++),t.value=!t.value};return b(n,()=>r(),{immediate:!0}),{isLike:t,likeCount:_(s),updateLikeCount:m=>s.value=m,toggleLike:c}},$e=(e,i)=>{console.log(i);const{initialCount:v}=i||{},{uid:l,isAuthenticated:n}=V(j()),t=d(!1),s=d(v),a=d(e),r=async()=>{if(n.value===!1){t.value=!1;return}t.value=await Me(l.value,a.value)},c=async()=>{if(n.value===!1){alert("\uB85C\uADF8\uC778 \uD6C4 \uC774\uC6A9 \uAC00\uB2A5\uD569\uB2C8\uB2E4.");return}t.value?(await Ve(l.value,a.value),s.value--):(await je(l.value,a.value),s.value++),t.value=!t.value};return b(n,()=>r(),{immediate:!0}),{isBookmark:t,bookmarkCount:_(s),updateBookmarkCount:m=>s.value=m,toggleBookmark:c}};var _e=se({name:"QTooltip",inheritAttrs:!1,props:{...le,...ie,...re,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:O},self:{type:String,default:"top middle",validator:O},offset:{type:Array,default:()=>[14,14],validator:ue},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...ce],setup(e,{slots:i,emit:v,attrs:l}){let n,t;const s=Te(),{proxy:{$q:a}}=s,r=d(null),c=d(!1),m=y(()=>N(e.anchor,a.lang.rtl)),R=y(()=>N(e.self,a.lang.rtl)),W=y(()=>e.persistent!==!0),{registerTick:Q,removeTick:z}=de(),{registerTimeout:k}=ve(),{transitionProps:$,transitionStyle:J}=fe(e),{localScrollTarget:S,changeScrollEvent:K,unconfigureScrollTarget:U}=me(e,x),{anchorEl:u,canShow:X,anchorEvents:h}=he({showing:c,configureAnchorEl:ae}),{show:Z,hide:p}=ge({showing:c,canShow:X,handleShow:G,handleHide:Y,hideOnRouteChange:W,processOnMount:!0});Object.assign(h,{delayShow:ee,delayHide:te});const{showPortal:w,hidePortal:C,renderPortal:F}=ke(s,r,ne,"tooltip");if(a.platform.is.mobile===!0){const o={anchorEl:u,innerRef:r,onClickOutside(f){return p(f),f.target.classList.contains("q-dialog__backdrop")&&we(f),!0}},T=y(()=>e.modelValue===null&&e.persistent!==!0&&c.value===!0);b(T,f=>{(f===!0?Ce:E)(o)}),L(()=>{E(o)})}function G(o){w(),Q(()=>{t=new MutationObserver(()=>g()),t.observe(r.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),g(),x()}),n===void 0&&(n=b(()=>a.screen.width+"|"+a.screen.height+"|"+e.self+"|"+e.anchor+"|"+a.lang.rtl,g)),k(()=>{w(!0),v("show",o)},e.transitionDuration)}function Y(o){z(),C(),P(),k(()=>{C(!0),v("hide",o)},e.transitionDuration)}function P(){t!==void 0&&(t.disconnect(),t=void 0),n!==void 0&&(n(),n=void 0),U(),A(h,"tooltipTemp")}function g(){ye({targetEl:r.value,offset:e.offset,anchorEl:u.value,anchorOrigin:m.value,selfOrigin:R.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ee(o){if(a.platform.is.mobile===!0){q(),document.body.classList.add("non-selectable");const T=u.value,f=["touchmove","touchcancel","touchend","click"].map(B=>[T,B,"delayHide","passiveCapture"]);H(h,"tooltipTemp",f)}k(()=>{Z(o)},e.delay)}function te(o){a.platform.is.mobile===!0&&(A(h,"tooltipTemp"),q(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),k(()=>{p(o)},e.hideDelay)}function ae(){if(e.noParentEvent===!0||u.value===null)return;const o=a.platform.is.mobile===!0?[[u.value,"touchstart","delayShow","passive"]]:[[u.value,"mouseenter","delayShow","passive"],[u.value,"mouseleave","delayHide","passive"]];H(h,"anchor",o)}function x(){if(u.value!==null||e.scrollTarget!==void 0){S.value=be(u.value,e.scrollTarget);const o=e.noParentEvent===!0?g:p;K(S.value,o)}}function oe(){return c.value===!0?D("div",{...l,ref:r,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",l.class],style:[l.style,J.value],role:"tooltip"},Se(i.default)):null}function ne(){return D(pe,$.value,oe)}return L(P),Object.assign(s.proxy,{updatePosition:g}),F}});const Re={class:"text-grey q-ml-xs text-body2"},Je={__name:"PostIcon",props:{name:{type:String,required:!0},label:{type:[String,Number]},tooltip:{type:String}},setup(e){return(i,v)=>(I(),Pe("div",null,[xe(Oe,Be({name:e.name,color:"grey",size:"xs"},i.$attrs),null,16,["name"]),Le("span",Re,M(e.label),1),e.tooltip?(I(),Ee(_e,{key:0,offset:[0,4]},{default:Ae(()=>[qe(M(e.tooltip),1)]),_:1})):He("",!0)]))}};export{Je as _,$e as a,ze as u};
