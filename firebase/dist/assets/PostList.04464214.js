import{s as T,u as C,aI as B,o as i,i as p,q as l,j as a,a8 as x,aJ as w,c as t,aG as o,t as m,a as H,d as _,F as M,f as g,ad as b,w as L,aa as q,ag as Q}from"./index.5ba5d6ce.js";import{Q as I}from"./QChip.da229628.js";import{u as A,a as N,_ as y}from"./PostIcon.7d2fd7c0.js";import{b as R}from"./post.342e5965.js";function S(e){const s=new Intl.RelativeTimeFormat("ko",{numeric:"auto"}),h=new Date,n=Math.abs(e-h),k=Math.floor(n/1e3),d=Math.floor(k/60),u=Math.floor(d/60),c=Math.floor(u/24);console.log("days : ",c);const r=Math.floor(c/365);return console.log("years : ",r),r>0?s.format(-1*r,"year"):c>0?s.format(-1*c,"day"):u>0?s.format(-1*u,"hour"):d>0?s.format(-1*d,"minute"):s.format(-1*k,"second")}const D=["src"],F={class:"flex items-center"},U=t("span",{class:"q-mx-xs"},"\xB7",-1),V={class:"text-h6 q-mt-sm"},$={class:"text-primary text-caption"},j={key:0,class:"text-grey-6 q-my-sm ellipsis-2-lines"},P=["innerHTML"],E=["innerHTML"],G={class:"row items-center"},J={class:"col-3"},O={class:"flex flex-center"},z={class:"col-3"},K={class:"flex flex-center"},W={class:"col-3"},X={class:"flex flex-center"},Y={class:"col-3"},Z={class:"flex flex-center"},ee={__name:"PostItem",props:{item:{type:Object,default:()=>({})},escapeHTML:{type:Boolean,default:!1}},setup(e){const s=e;T(C());const{isLike:h,likeCount:n,toggleLike:k}=A(s.item.id,{initialCount:s.item.likeCount}),{isBookmark:d,bookmarkCount:u,toggleBookmark:c}=N(s.item.id,{initialCount:s.item.bookmarkCount}),{state:r}=B(()=>R(s.item.uid),{});return(te,se)=>(i(),p(q,{class:"bg-white q-pt-md",clickable:"",to:`/posts/${e.item.id}`},{default:l(()=>[a(x,{avatar:"",top:""},{default:l(()=>[a(w,null,{default:l(()=>{var f;return[t("img",{src:(f=o(r))==null?void 0:f.photoURL,alt:""},null,8,D)]}),_:1})]),_:1}),a(x,null,{default:l(()=>{var f;return[t("div",F,[t("span",null,m((f=o(r))==null?void 0:f.displayName),1),U,t("span",null,m(o(S)(e.item.createdAt)),1),a(I,{class:"q-ml-md",dense:"",color:"primary","text-color":"white"},{default:l(()=>[H(m(e.item.category),1)]),_:1})]),t("div",V,m(e.item.title),1),t("div",$,[(i(!0),_(M,null,g(e.item.tags,v=>(i(),_("span",{key:v,class:"q-mr-sm"},"#"+m(v),1))),128))]),e.escapeHTML?(i(),_("div",j,m(e.item.content),1)):(i(),_("div",{key:1,class:"text-grey-6 q-my-sm ellipsis-2-lines",innerHTML:e.item.content},null,8,P)),t("div",{class:"text-grey-6 q-my-sm ellipsis-2-lines",innerHTML:e.item.content},null,8,E),t("div",G,[t("div",J,[t("div",O,[a(y,{name:"sym_o_visibility",label:e.item.readCount,tooltip:"\uC870\uD68C\uC218"},null,8,["label"])])]),t("div",z,[t("div",K,[a(y,{name:"sym_o_sms",label:e.item.commentCount,tooltip:"\uB313\uAE00\uC218"},null,8,["label"])])]),t("div",W,[t("div",X,[a(b,{class:"full-width",flat:"",dense:"",onClick:L(o(k),["prevent"])},{default:l(()=>[a(y,{name:o(h)?"favorite":"sym_o_favorite",label:o(n),tooltip:"\uC88B\uC544\uC694"},null,8,["name","label"])]),_:1},8,["onClick"])])]),t("div",Y,[t("div",Z,[a(b,{class:"full-width",flat:"",dense:"",onClick:L(o(c),["prevent"])},{default:l(()=>[a(y,{name:o(d)?"bookmark":"sym_o_bookmark",label:o(u),tooltip:"\uBD81\uB9C8\uD06C"},null,8,["name","label"])]),_:1},8,["onClick"])])])])]}),_:1})]),_:1},8,["to"]))}},ne={__name:"PostList",props:{items:Array,default:()=>[],escapeHTML:{type:Boolean,default:!1}},setup(e){return(s,h)=>(i(),p(Q,{bordered:"",separator:""},{default:l(()=>[(i(!0),_(M,null,g(e.items,n=>(i(),p(ee,{key:n.id,item:n,escapeHTML:e.escapeHTML},null,8,["item","escapeHTML"]))),128))]),_:1}))}};export{ne as _};
