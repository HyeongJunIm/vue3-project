import{s as V,u as j,V as d,Z as y,bs as _,L as se,bt as le,M as ie,bu as re,bv as O,bw as ue,P as ce,W as b,az as de,R as ve,bx as fe,by as me,bz as he,X as ge,bA as ke,a0 as E,bB as L,I as A,bC as be,K as q,C as H,bD as ye,h as D,bn as pe,a5 as Te,bE as N,a3 as Se,J as we,bF as Ce,o as I,d as Pe,j as xe,x as Be,a9 as Oe,c as Ee,t as M,i as Le,q as Ae,a as qe,e as He}from"./index.5ba5d6ce.js";import{h as De,r as Ne,d as Ie,e as Me,f as Ve,i as je}from"./post.342e5965.js";const Qe=(e,i)=>{console.log(i);const{initialCount:v}=i||{},{uid:l,isAuthenticated:n}=V(j()),t=d(!1),s=d(v),a=d(e),r=async()=>{if(n.value===!1){t.value=!1;return}t.value=await De(l.value,a.value)},c=async()=>{if(n.value===!1){alert("\uB85C\uADF8\uC778 \uD6C4 \uC774\uC6A9 \uAC00\uB2A5\uD569\uB2C8\uB2E4.");return}t.value?(await Ne(l.value,a.value),s.value--):(await Ie(l.value,a.value),s.value++),t.value=!t.value};return y(n,()=>r(),{immediate:!0}),{isLike:t,likeCount:_(s),updateLikeCount:m=>s.value=m,toggleLike:c}},$e=(e,i)=>{console.log(i);const{initialCount:v}=i||{},{uid:l,isAuthenticated:n}=V(j()),t=d(!1),s=d(v),a=d(e),r=async()=>{if(n.value===!1){t.value=!1;return}t.value=await Me(l.value,a.value)},c=async()=>{if(n.value===!1){alert("\uB85C\uADF8\uC778 \uD6C4 \uC774\uC6A9 \uAC00\uB2A5\uD569\uB2C8\uB2E4.");return}t.value?(await Ve(l.value,a.value),s.value--):(await je(l.value,a.value),s.value++),t.value=!t.value};return y(n,()=>r(),{immediate:!0}),{isBookmark:t,bookmarkCount:_(s),updateBookmarkCount:m=>s.value=m,toggleBookmark:c}};var _e=se({name:"QTooltip",inheritAttrs:!1,props:{...le,...ie,...re,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:O},self:{type:String,default:"top middle",validator:O},offset:{type:Array,default:()=>[14,14],validator:ue},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...ce],setup(e,{slots:i,emit:v,attrs:l}){let n,t;const s=Te(),{proxy:{$q:a}}=s,r=d(null),c=d(!1),m=b(()=>N(e.anchor,a.lang.rtl)),R=b(()=>N(e.self,a.lang.rtl)),W=b(()=>e.persistent!==!0),{registerTick:z,removeTick:Q}=de(),{registerTimeout:k}=ve(),{transitionProps:$,transitionStyle:F}=fe(e),{localScrollTarget:S,changeScrollEvent:J,unconfigureScrollTarget:K}=me(e,x),{anchorEl:u,canShow:U,anchorEvents:h}=he({showing:c,configureAnchorEl:ae}),{show:X,hide:p}=ge({showing:c,canShow:U,handleShow:G,handleHide:Y,hideOnRouteChange:W,processOnMount:!0});Object.assign(h,{delayShow:ee,delayHide:te});const{showPortal:w,hidePortal:C,renderPortal:Z}=ke(s,r,ne,"tooltip");if(a.platform.is.mobile===!0){const o={anchorEl:u,innerRef:r,onClickOutside(f){return p(f),f.target.classList.contains("q-dialog__backdrop")&&we(f),!0}},T=b(()=>e.modelValue===null&&e.persistent!==!0&&c.value===!0);y(T,f=>{(f===!0?Ce:L)(o)}),E(()=>{L(o)})}function G(o){w(),z(()=>{t=new MutationObserver(()=>g()),t.observe(r.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),g(),x()}),n===void 0&&(n=y(()=>a.screen.width+"|"+a.screen.height+"|"+e.self+"|"+e.anchor+"|"+a.lang.rtl,g)),k(()=>{w(!0),v("show",o)},e.transitionDuration)}function Y(o){Q(),C(),P(),k(()=>{C(!0),v("hide",o)},e.transitionDuration)}function P(){t!==void 0&&(t.disconnect(),t=void 0),n!==void 0&&(n(),n=void 0),K(),A(h,"tooltipTemp")}function g(){be({targetEl:r.value,offset:e.offset,anchorEl:u.value,anchorOrigin:m.value,selfOrigin:R.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ee(o){if(a.platform.is.mobile===!0){q(),document.body.classList.add("non-selectable");const T=u.value,f=["touchmove","touchcancel","touchend","click"].map(B=>[T,B,"delayHide","passiveCapture"]);H(h,"tooltipTemp",f)}k(()=>{X(o)},e.delay)}function te(o){a.platform.is.mobile===!0&&(A(h,"tooltipTemp"),q(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),k(()=>{p(o)},e.hideDelay)}function ae(){if(e.noParentEvent===!0||u.value===null)return;const o=a.platform.is.mobile===!0?[[u.value,"touchstart","delayShow","passive"]]:[[u.value,"mouseenter","delayShow","passive"],[u.value,"mouseleave","delayHide","passive"]];H(h,"anchor",o)}function x(){if(u.value!==null||e.scrollTarget!==void 0){S.value=ye(u.value,e.scrollTarget);const o=e.noParentEvent===!0?g:p;J(S.value,o)}}function oe(){return c.value===!0?D("div",{...l,ref:r,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",l.class],style:[l.style,F.value],role:"tooltip"},Se(i.default)):null}function ne(){return D(pe,$.value,oe)}return E(P),Object.assign(s.proxy,{updatePosition:g}),Z}});const Re={class:"text-grey q-ml-xs text-body2"},Fe={__name:"PostIcon",props:{name:{type:String,required:!0},label:{type:[String,Number]},tooltip:{type:String}},setup(e){return(i,v)=>(I(),Pe("div",null,[xe(Oe,Be({name:e.name,color:"grey",size:"xs"},i.$attrs),null,16,["name"]),Ee("span",Re,M(e.label),1),e.tooltip?(I(),Le(_e,{key:0,offset:[0,4]},{default:Ae(()=>[qe(M(e.tooltip),1)]),_:1})):He("",!0)]))}};export{Fe as _,$e as a,Qe as u};
