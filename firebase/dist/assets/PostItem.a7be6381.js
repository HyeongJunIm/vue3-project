import{s as C,u as g,aH as w,o as k,i as B,q as l,j as o,a7 as y,aI as M,c as t,aF as a,t as d,a as q,d as x,F as L,f as T,ac as b,w as p,a9 as I}from"./index.2f033bc0.js";import{Q}from"./QChip.ae868b30.js";import{u as A,a as F,_ as f}from"./PostIcon.df7bf63f.js";import{b as N}from"./post.a5a91c36.js";function R(e){const s=new Intl.RelativeTimeFormat("ko",{numeric:"auto"}),_=new Date,h=Math.abs(e-_),u=Math.floor(h/1e3),c=Math.floor(u/60),r=Math.floor(c/60),i=Math.floor(r/24);console.log("days : ",i);const n=Math.floor(i/365);return console.log("years : ",n),n>0?s.format(-1*n,"year"):i>0?s.format(-1*i,"day"):r>0?s.format(-1*r,"hour"):c>0?s.format(-1*c,"minute"):s.format(-1*u,"second")}const S=["src"],D={class:"flex items-center"},H=t("span",{class:"q-mx-xs"},"\xB7",-1),U={class:"text-h6 q-mt-sm"},V={class:"text-primary text-caption"},j=["innerHTML"],$={class:"row items-center"},E={class:"col-3"},O={class:"flex flex-center"},P={class:"col-3"},z={class:"flex flex-center"},G={class:"col-3"},J={class:"flex flex-center"},K={class:"col-3"},W={class:"flex flex-center"},ot={__name:"PostItem",props:{item:{type:Object,default:()=>({})}},setup(e){const s=e;C(g());const{isLike:_,likeCount:h,toggleLike:u}=A(s.item.id,{initialCount:s.item.likeCount}),{isBookmark:c,bookmarkCount:r,toggleBookmark:i}=F(s.item.id,{initialCount:s.item.bookmarkCount}),{state:n}=w(()=>N(s.item.uid),{});return(X,Y)=>(k(),B(I,{class:"bg-white q-pt-md",clickable:"",to:`/posts/${e.item.id}`},{default:l(()=>[o(y,{avatar:"",top:""},{default:l(()=>[o(M,null,{default:l(()=>{var m;return[t("img",{src:(m=a(n))==null?void 0:m.photoURL,alt:""},null,8,S)]}),_:1})]),_:1}),o(y,null,{default:l(()=>{var m;return[t("div",D,[t("span",null,d((m=a(n))==null?void 0:m.displayName),1),H,t("span",null,d(a(R)(e.item.createdAt)),1),o(Q,{class:"q-ml-md",dense:"",color:"primary","text-color":"white"},{default:l(()=>[q(d(e.item.category),1)]),_:1})]),t("div",U,d(e.item.title),1),t("div",V,[(k(!0),x(L,null,T(e.item.tags,v=>(k(),x("span",{key:v,class:"q-mr-sm"},"#"+d(v),1))),128))]),t("div",{class:"text-grey-6 q-my-sm ellipsis-2-lines",innerHTML:e.item.content},null,8,j),t("div",$,[t("div",E,[t("div",O,[o(f,{name:"sym_o_visibility",label:e.item.readCount,tooltip:"\uC870\uD68C\uC218"},null,8,["label"])])]),t("div",P,[t("div",z,[o(f,{name:"sym_o_sms",label:e.item.commentCount,tooltip:"\uB313\uAE00\uC218"},null,8,["label"])])]),t("div",G,[t("div",J,[o(b,{class:"full-width",flat:"",dense:"",onClick:p(a(u),["prevent"])},{default:l(()=>[o(f,{name:a(_)?"favorite":"sym_o_favorite",label:a(h),tooltip:"\uC88B\uC544\uC694"},null,8,["name","label"])]),_:1},8,["onClick"])])]),t("div",K,[t("div",W,[o(b,{class:"full-width",flat:"",dense:"",onClick:p(a(i),["prevent"])},{default:l(()=>[o(f,{name:a(c)?"bookmark":"sym_o_bookmark",label:a(r),tooltip:"\uBD81\uB9C8\uD06C"},null,8,["name","label"])]),_:1},8,["onClick"])])])])]}),_:1})]),_:1},8,["to"]))}};export{ot as _};
